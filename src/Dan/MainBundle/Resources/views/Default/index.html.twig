{% extends 'DanMainBundle::layout.html.twig' %}

{% block title %}Ventoonirico's collection{% endblock %}
{% block content %}

    <div id="app"></div>
{% endblock %}

{% block templates %}
    {{parent()}}
    
    <script type="text/template" id="games">
        
        <div id="current-user"></div>
        <div id="game-count"></div>
        <div id="game-list"><div class="loading"></div></div>
    </script>
    
    <script type="text/template" id="game-count">
        Ventoonirico dispone di <strong><% if (!count) { %>...<% } else { %><%= count %><% } %></strong> giochi
    </script>
    
    <script type="text/template" id="current-user">
        <%= user.email %>
    </script>
    
    <script type="text/template" id="game-list">
        <table class="game-list table table-bordered">
        </table>
    </script>
    
    
    <script type="text/template" id="game">
        <tr id="game_<%= game.id %>" >
            <td class="game-image">
                <a href="http://boardgamegeek.com/boardgame/<%= game.id %>" target="_blank" ><img class="img-polaroid" src="<%= game.thumbnail %>" /></a>
            </td>
            <td>
                <div class="pull-right game-status" ></div>
                <h4><%= game.name %></h4>
                <em><%= game.owners.join(', ') %></em><br/>
                <%= game.minPlayers %> - <%= game.maxPlayers %> giocatori<br/>
            </td>
        </tr>
    </script>
    
    <script type="text/template" id="game-status-nouser-nodesire">
    </script>
    <script type="text/template" id="game-status-user-nodesire">
        <div class="game-status well" ><a class="desire-create icon icon-plus" href="#"></a></div>
    </script>
    <script type="text/template" id="game-status-nouser-desire">
        <div class="game-status well" >
            <div class="player player-main">
                <img class="img-polaroid" src="<%= String('{{path('user_image', {username: '_username_', filter: 'player_main'})}}').replace('_username_', desire.get('owner').get('username')) %>" />
            </div>
            <% for(var i=0; i<game.get('maxPlayers')-1; i++) { %>
                <% if (desire.joined && desire.joined[i]) { %>
                    <div class="player player-joined">
                        <img class="img-polaroid" src="<%= String('{{path('user_image', {username: '_username_', filter: 'player_joined'})}}').replace('_username_', desire.joined[i].get('username')) %>" />
                    </div>
                <% } else { %>
                    <div class="player player-nobody">
                        <img class="img-polaroid" src="{{ '/icons/player-nobody.png' | apply_filter('player_joined') }}" alt="Posto libero" />
                    </div>
                <% } %>
            <% } %>
        </div>
    </script>
    <script type="text/template" id="game-status-user-desire-owner">
        <div class="game-status well" >
            <a class="desire-remove" href="#"><img src="<%= String('{{path('user_image', {username: '_username_', filter: 'mini'})}}').replace('_username_', desire.get('owner').get('username')) %>" /></a>
        </div>
    </script>
    <script type="text/template" id="game-status-user-desire-noowner">
        <div class="game-status well" >
            <img src="<%= String('{{path('user_image', {username: '_username_', filter: 'mini'})}}').replace('_username_', desire.get('owner').get('username')) %>" />
        </div>
    </script>

{% endblock%}
