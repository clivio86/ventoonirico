{% extends 'DanMainBundle::layout.html.twig' %}

{% block title %}Ventoonirico's collection{% endblock %}
{% block content %}
Ventoonirico dispone di <strong>{{games|length}}</strong> giochi
<table class="games-collection table table-bordered">
    {% for game in games %}
        <tr id="game_{{game.id}}" >
            <td class="image">
                <a href="http://boardgamegeek.com/boardgame/{{game.id}}" target="_blank" ><img src="{{game.thumbnail}}" /></a>
            </td>
            <td>
                <div class="pull-right game-status well"></div>
                <h4>{{game.name}}</h4>
                di <em>{{game.owners|join(', ')}}</em><br/>
                {{game.minPlayers}} - {{game.maxPlayers}} giocatori<br/>
            </td>
        </tr>
    {% endfor %}
</table>
{% endblock %}

{% block templates %}
    {{parent()}}
    <script type="text/template" id="user_image">
        {% if app.user %}
            <img src="{{app.user.image | apply_filter('mini', true)}}" />
        {% endif %}
    </script>
    <script type="text/template" id="icon-plus">
        
    </script>

    <script type="text/template" id="game-status-unlogged">
        <% if ( !desire ){ %>
            ok
        <% } else { %>
            <img src="<%= desire.owner.image %>" />
            <% if (desire.joinedUsers){ %>
                <% _.each( desire.joinedUsers, function( user ){ %>
                    <img src="<%= user.image %>" />
                <% }); %>
            <% } %>
        <% } %>
    </script>

    <script type="text/template" id="game-status-logged">
        <% if ( !desire ){ %>
            <a href="#" class="create-desire icon-plus" ></a>
        <% } else { %>
            <img src="<%= desire.owner.image %>" />
            <% if (desire.joinedUsers){ %>
                <% _.each( desire.joinedUsers, function( user ){ %>
                    <img src="<%= user.image %>" />
                <% }); %>
            <% } %>
        <% } %>
    </script>
{% endblock%}
